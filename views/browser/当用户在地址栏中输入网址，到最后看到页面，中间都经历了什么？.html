<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>当用户在地址栏中输入网址，到最后看到页面，中间都经历了什么？ | HEROES NEVER DIE</title>
    <meta name="description" content="Life is what you make it">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.1ab602e8.css" as="style"><link rel="preload" href="/assets/js/app.d8b9440e.js" as="script"><link rel="preload" href="/assets/js/3.7525ef15.js" as="script"><link rel="preload" href="/assets/js/1.04d39d01.js" as="script"><link rel="preload" href="/assets/js/15.d31d99e4.js" as="script"><link rel="prefetch" href="/assets/js/10.d35f88d7.js"><link rel="prefetch" href="/assets/js/11.033b02bc.js"><link rel="prefetch" href="/assets/js/12.77168713.js"><link rel="prefetch" href="/assets/js/13.f67bf4c4.js"><link rel="prefetch" href="/assets/js/14.79b962f7.js"><link rel="prefetch" href="/assets/js/16.38887749.js"><link rel="prefetch" href="/assets/js/17.fdf78c50.js"><link rel="prefetch" href="/assets/js/18.4578d7aa.js"><link rel="prefetch" href="/assets/js/19.8eef112a.js"><link rel="prefetch" href="/assets/js/20.6a4a8604.js"><link rel="prefetch" href="/assets/js/21.d22d6705.js"><link rel="prefetch" href="/assets/js/22.079d05ca.js"><link rel="prefetch" href="/assets/js/23.dce9f8d1.js"><link rel="prefetch" href="/assets/js/24.01b7ac77.js"><link rel="prefetch" href="/assets/js/25.f3b8b8fe.js"><link rel="prefetch" href="/assets/js/26.d40ab5eb.js"><link rel="prefetch" href="/assets/js/27.449279ce.js"><link rel="prefetch" href="/assets/js/28.cd571a3a.js"><link rel="prefetch" href="/assets/js/29.ba774076.js"><link rel="prefetch" href="/assets/js/30.0ca6007e.js"><link rel="prefetch" href="/assets/js/31.f56e6837.js"><link rel="prefetch" href="/assets/js/32.ea96bc9d.js"><link rel="prefetch" href="/assets/js/33.615a0c71.js"><link rel="prefetch" href="/assets/js/34.80c2571c.js"><link rel="prefetch" href="/assets/js/35.94c01fdb.js"><link rel="prefetch" href="/assets/js/36.88b4cbd9.js"><link rel="prefetch" href="/assets/js/37.421c38a9.js"><link rel="prefetch" href="/assets/js/38.3be185e9.js"><link rel="prefetch" href="/assets/js/39.c05e9850.js"><link rel="prefetch" href="/assets/js/4.3967b739.js"><link rel="prefetch" href="/assets/js/40.d8af6919.js"><link rel="prefetch" href="/assets/js/41.1bcfe568.js"><link rel="prefetch" href="/assets/js/42.9a7d79b8.js"><link rel="prefetch" href="/assets/js/43.5dc7378e.js"><link rel="prefetch" href="/assets/js/44.ee30df8e.js"><link rel="prefetch" href="/assets/js/45.e6607493.js"><link rel="prefetch" href="/assets/js/46.c7f21282.js"><link rel="prefetch" href="/assets/js/47.f8213fbd.js"><link rel="prefetch" href="/assets/js/48.b8ccdb51.js"><link rel="prefetch" href="/assets/js/49.6b8ae4ef.js"><link rel="prefetch" href="/assets/js/5.ef5d5249.js"><link rel="prefetch" href="/assets/js/50.73379d01.js"><link rel="prefetch" href="/assets/js/51.0ad56e7f.js"><link rel="prefetch" href="/assets/js/52.2ef05ac4.js"><link rel="prefetch" href="/assets/js/53.873a5c0e.js"><link rel="prefetch" href="/assets/js/54.ea547f42.js"><link rel="prefetch" href="/assets/js/55.00381706.js"><link rel="prefetch" href="/assets/js/56.f63ca0f5.js"><link rel="prefetch" href="/assets/js/57.d5fb4419.js"><link rel="prefetch" href="/assets/js/58.19e42ce4.js"><link rel="prefetch" href="/assets/js/59.f7669aba.js"><link rel="prefetch" href="/assets/js/6.e0fb693f.js"><link rel="prefetch" href="/assets/js/60.b71b61a2.js"><link rel="prefetch" href="/assets/js/61.cccc371b.js"><link rel="prefetch" href="/assets/js/62.60f9e93a.js"><link rel="prefetch" href="/assets/js/63.aefe2cf8.js"><link rel="prefetch" href="/assets/js/64.36284f6f.js"><link rel="prefetch" href="/assets/js/65.a8b2ad72.js"><link rel="prefetch" href="/assets/js/66.9c855436.js"><link rel="prefetch" href="/assets/js/67.bfd383d6.js"><link rel="prefetch" href="/assets/js/68.74565182.js"><link rel="prefetch" href="/assets/js/69.888ae5ac.js"><link rel="prefetch" href="/assets/js/7.3bfae770.js"><link rel="prefetch" href="/assets/js/70.4c8ec57b.js"><link rel="prefetch" href="/assets/js/71.1a985a4a.js"><link rel="prefetch" href="/assets/js/72.bbe31a51.js"><link rel="prefetch" href="/assets/js/73.9f88dc21.js"><link rel="prefetch" href="/assets/js/74.0bfc4159.js"><link rel="prefetch" href="/assets/js/75.1ab8db7e.js"><link rel="prefetch" href="/assets/js/76.6c26af06.js"><link rel="prefetch" href="/assets/js/8.4e7344e9.js"><link rel="prefetch" href="/assets/js/9.91819e6d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1ab602e8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-319dd33c><div data-v-319dd33c><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-319dd33c data-v-319dd33c><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-1e2a0cc0 data-v-319dd33c data-v-319dd33c><h3 class="title" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0>HEROES NEVER DIE</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0><input type="password" value="" data-v-1e2a0cc0> <span data-v-1e2a0cc0>Konck! Knock!</span> <button data-v-1e2a0cc0>OK</button></label> <div class="footer" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0><span data-v-1e2a0cc0><i class="iconfont reco-theme" data-v-1e2a0cc0></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-1e2a0cc0>vuePress-theme-reco</a></span> <span data-v-1e2a0cc0><i class="iconfont reco-copyright" data-v-1e2a0cc0></i> <a data-v-1e2a0cc0><span data-v-1e2a0cc0>辽北地区著名狠人</span>
            
          <span data-v-1e2a0cc0>2019 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-319dd33c><header class="navbar" data-v-319dd33c><div class="sidebar-button"><div><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div></div> <a href="/" class="home-link router-link-active"><img src="https://resource.limeili.co/logo.png" alt="HEROES NEVER DIE" class="logo"> <span class="site-name">HEROES NEVER DIE</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-yirenzu-heifuwang"></use></svg> 
    Home
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-fuchouzhelianmeng-heiguafu"></use></svg>
        FrontEnd
      </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/CSS/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-css"></use></svg> 
    CSS
  </a></li><li class="dropdown-item"><!----> <a href="/categories/VUE/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-vue"></use></svg> 
    VUE
  </a></li><li class="dropdown-item"><!----> <a href="/categories/Browser/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-gugeliulanqi"></use></svg> 
    Browser
  </a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-socialjavascript"></use></svg> 
    JavaScript
  </a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-shenqisixia-pilihuo"></use></svg> 
    Tag
  </a></div><div class="nav-item"><a href="/views/notes/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-shenqisixia-yinxingnvxia"></use></svg> 
    Notes
  </a></div><div class="nav-item"><a href="/views/daily/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-feihongnvwu"></use></svg> 
    Daily
  </a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-yinhehuweidui-gelute"></use></svg> 
    TimeLine
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-qiyiboshi"></use></svg>
        Link
      </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/browser/.html" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-github"></use></svg> 
    GitHub
  </a></li><li class="dropdown-item"><!----> <a href="/views/browser/.html" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-weixin"></use></svg> 
    WeChat
  </a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-319dd33c></div> <aside class="sidebar" data-v-319dd33c><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="https://resource.limeili.co/avatar.png" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    辽北地区著名狠人
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>55</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>67</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-yirenzu-heifuwang"></use></svg> 
    Home
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-fuchouzhelianmeng-heiguafu"></use></svg>
        FrontEnd
      </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/CSS/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-css"></use></svg> 
    CSS
  </a></li><li class="dropdown-item"><!----> <a href="/categories/VUE/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-vue"></use></svg> 
    VUE
  </a></li><li class="dropdown-item"><!----> <a href="/categories/Browser/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-gugeliulanqi"></use></svg> 
    Browser
  </a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-socialjavascript"></use></svg> 
    JavaScript
  </a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-shenqisixia-pilihuo"></use></svg> 
    Tag
  </a></div><div class="nav-item"><a href="/views/notes/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-shenqisixia-yinxingnvxia"></use></svg> 
    Notes
  </a></div><div class="nav-item"><a href="/views/daily/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-feihongnvwu"></use></svg> 
    Daily
  </a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-yinhehuweidui-gelute"></use></svg> 
    TimeLine
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-qiyiboshi"></use></svg>
        Link
      </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/browser/.html" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-github"></use></svg> 
    GitHub
  </a></li><li class="dropdown-item"><!----> <a href="/views/browser/.html" class="nav-link"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-weixin"></use></svg> 
    WeChat
  </a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>当用户在地址栏中输入网址，到最后看到页面，中间都经历了什么？</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_1-解析输入的url地址" class="sidebar-link">1.解析输入的URL地址</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#关于传递的内容需要进行编码处理（处理特殊字符和中文）" class="sidebar-link">关于传递的内容需要进行编码处理（处理特殊字符和中文）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_2-dns解析" class="sidebar-link">2.DNS解析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_3-基于tcp的三次握手，够建客户端和服务器端的连接通道" class="sidebar-link">3.基于TCP的三次握手，够建客户端和服务器端的连接通道</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_4-发送http请求" class="sidebar-link">4.发送HTTP请求</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_5-服务器接受到请求，并进行处理，最后把信息返回给客户端" class="sidebar-link">5.服务器接受到请求，并进行处理，最后把信息返回给客户端</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_6-断开tcp-四次挥手" class="sidebar-link">6.断开TCP 四次挥手</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_7-客户端渲染服务器返回的结果" class="sidebar-link">7.客户端渲染服务器返回的结果</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#前端性能优化点" class="sidebar-link">前端性能优化点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_1-减少http请求的次数和大小" class="sidebar-link">1. 减少HTTP请求的次数和大小</a></li><li class="sidebar-sub-header"><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_2-建立缓存机制" class="sidebar-link">2.建立缓存机制</a></li><li class="sidebar-sub-header"><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_3-代码上的优化" class="sidebar-link">3.代码上的优化</a></li><li class="sidebar-sub-header"><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_4-安全优化" class="sidebar-link">4.安全优化</a></li><li class="sidebar-sub-header"><a href="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html#_5-webpack上的优化" class="sidebar-link">5.webpack上的优化</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-1e2a0cc0 data-v-319dd33c><h3 class="title" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0>当用户在地址栏中输入网址，到最后看到页面，中间都经历了什么？</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0><input type="password" value="" data-v-1e2a0cc0> <span data-v-1e2a0cc0>Konck! Knock!</span> <button data-v-1e2a0cc0>OK</button></label> <div class="footer" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0><span data-v-1e2a0cc0><i class="iconfont reco-theme" data-v-1e2a0cc0></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-1e2a0cc0>vuePress-theme-reco</a></span> <span data-v-1e2a0cc0><i class="iconfont reco-copyright" data-v-1e2a0cc0></i> <a data-v-1e2a0cc0><span data-v-1e2a0cc0>辽北地区著名狠人</span>
            
          <span data-v-1e2a0cc0>2019 - </span>
          2021
        </a></span></div></div> <div data-v-319dd33c><main class="page"><div class="page-title" style="display:none;"><h1>当用户在地址栏中输入网址，到最后看到页面，中间都经历了什么？</h1> <hr> <div data-v-0ad1ce1a><i class="iconfont icon-zhengfuzhekang" style="display:;" data-v-0ad1ce1a><svg aria-hidden="true" class="icon" data-v-0ad1ce1a><use xlink:href="#icon-rili" data-v-0ad1ce1a></use></svg> <span data-v-0ad1ce1a>2020-03-09</span></i> <i class="iconfont " style="display:;" data-v-0ad1ce1a><svg aria-hidden="true" class="icon" data-v-0ad1ce1a><use xlink:href="#icon-yanjing" data-v-0ad1ce1a></use></svg> <span id="/views/browser/%E5%BD%93%E7%94%A8%E6%88%B7%E5%9C%A8%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%B8%AD%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%EF%BC%8C%E5%88%B0%E6%9C%80%E5%90%8E%E7%9C%8B%E5%88%B0%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%AD%E9%97%B4%E9%83%BD%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-0ad1ce1a><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont  tags" style="display:;" data-v-0ad1ce1a><svg aria-hidden="true" class="icon" data-v-0ad1ce1a><use xlink:href="#icon-biaoqian" data-v-0ad1ce1a></use></svg> <span class="tag-item" data-v-0ad1ce1a>
        性能优化
      </span><span class="tag-item" data-v-0ad1ce1a>
        TCP
      </span><span class="tag-item" data-v-0ad1ce1a>
        HTTP
      </span></i> <i class="iconfont  tags" style="display:;" data-v-0ad1ce1a><svg aria-hidden="true" class="icon" data-v-0ad1ce1a><use xlink:href="#icon-fenlei4" data-v-0ad1ce1a></use></svg> <span class="tag-item" data-v-0ad1ce1a>
        Browser
      </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p><img src="https://resource.limeili.co/abstract/abstract%20(46).jpg" alt=""></p> <h2 id="_1-解析输入的url地址"><a href="#_1-解析输入的url地址" class="header-anchor">#</a> 1.解析输入的URL地址</h2> <ul><li><p>传输协议（把信息在客户端和服务器端进行传递，类似于快递小哥）</p> <ul><li>http 超文本传输协议（传输的内容除了文本，还有可能是其它类型：二进制编码、BASE64码、文件流等等）</li> <li>https 比HTTP更加安全的传输协议（传输通道设置加密算法SSL），一般支付类网站都是HTTPS协议</li> <li>ftp 资源上传协议，一般应用于把本地文件直接上传到服务器端</li></ul></li> <li><p>域名  zhufengpeixun.cn</p> <ul><li>一级域名</li> <li>二级域名</li> <li>三级域名</li></ul></li> <li><p>端口号 （根据端口号，找到当前服务器上指定的服务）</p> <ul><li>0~65535之间</li> <li>不同协议有自己默认的端口号（也就是自己不用写，浏览器会帮我们加上）
<ul><li>http =&gt; 80</li> <li>https =&gt; 443</li> <li>ftp =&gt; 21</li> <li>除这几个在书写的时候可以省略，其余的不能省</li></ul></li></ul></li> <li><p>请求资源的路径和名称</p> <ul><li>/stu/index.html
<ul><li>一般情况下，如果我们访问的是index.html等，可以省略不写（因为服务端一般会设置index.html为默认文档，当然可以自定义）</li></ul></li> <li>伪URL
<ul><li>SEO优化    https://item.jd.com/100006038463.html</li> <li>数据请求的接口地址  /user/list</li></ul></li></ul></li> <li><p>问号传参部分 ?xxx=xxx</p> <ul><li><p>客户端基于GET系列请求，把信息传递会服务器，一般都会基于问号传参的模式</p></li> <li><p>页面之间跳转，信息的一些通信也可以基于问号传参的方式（单页面中组件和组件跳转之间的信息通信，也可能基于问号传参）</p></li> <li><h2 id="关于传递的内容需要进行编码处理（处理特殊字符和中文）"><a href="#关于传递的内容需要进行编码处理（处理特殊字符和中文）" class="header-anchor">#</a> 关于传递的内容需要进行编码处理（处理特殊字符和中文）</h2> <p>客户端和服务器端都支持这两种编码和解码方式（客户端和服务器端信息编码一般都是基于这种方式）</p> <ul><li><p>encodeURI / decodeURI 只能把空格和中文内容进行编码和解码，所以一般应用这种模式处理整个URL的编码</p></li> <li><p>encodeURIComponent / decodeURIComponent 会把所有的特殊字符和汉字都进行编码，一般不会整个URL编码，只会给传递的每一个参数值单独编码</p></li> <li><p>escape / unescape 这种方式不一定所有的后台都有，所以一般只应用于客户端自己内部编码，例如：存储cookie信息，把存储的中文进行编码和解码；特殊符号也会被编码；</p></li> <li><p>...</p></li></ul></li></ul></li> <li><p>设置哈希HASH  #xxx</p></li></ul> <h2 id="_2-dns解析"><a href="#_2-dns解析" class="header-anchor">#</a> 2.DNS解析</h2> <p>网站中，每发送一个TCP请求，都要进行DNS解析（一但当前域名解析过一次，浏览器一般会缓存解析记录，缓存时间一般在1分钟左右，后期发送的请求如果还是这个域名，则跳过解析步骤 =&gt;这是一个性能优化点）<br>
真实项目中，一个大型网站，他要请求的资源是分散到不同的服务器上的（每一个服务器都有自己的一个域名解析）</p> <ul><li>WEB服务器（处理静态资源文件，例如：html/css/js等 的请求）</li> <li>数据服务器（处理数据请求）</li> <li>图片服务器 （处理图片请求）</li> <li>音视频服务器</li> <li>......
这样导致，我们需要解析的DNS会有很多次<br> <strong>优化技巧：DNS Prefetch 即 DNS 预获取</strong></li></ul> <blockquote><p>让页面加载（尤其是后期资源的加载）更顺畅更快一些</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>x-dns-prefetch-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>on<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>//static.360buyimg.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>//misc.360buyimg.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>//img10.360buyimg.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>//img11.360buyimg.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>//img12.360buyimg.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
.......
</code></pre></div><h2 id="_3-基于tcp的三次握手，够建客户端和服务器端的连接通道"><a href="#_3-基于tcp的三次握手，够建客户端和服务器端的连接通道" class="header-anchor">#</a> 3.基于TCP的三次握手，够建客户端和服务器端的连接通道</h2> <p>只有建立好连接通道，才能基于HTTP等传输协议，实现客户端和服务器端的信息交互
<img src="https://resource.limeili.co/image/202007041457.png" alt=""></p> <ol><li>第一次握手：Client将标志位SYN置为1，随机产生一个值seq=J，并将该数据包发送给Server，Client进入SYN_SENT状态，等待Server确认。</li> <li>第二次握手：Server收到数据包后由标志位SYN=1知道Client请求建立连接，Server将标志位SYN和ACK都置为1，ack=J+1，随机产生一个值seq=K，并将该数据包发送给Client以确认连接请求，Server进入SYN_RCVD状态。</li> <li>第三次握手：Client收到确认后，检查ack是否为J+1，ACK是否为1，如果正确则将标志位ACK置为1，ack=K+1，并将该数据包发送给Server，Server检查ack是否为K+1，ACK是否为1，如果正确则连接建立成功，Client和Server进入ESTABLISHED状态，完成三次握手，随后Client与Server之间可以开始传输数据了。</li></ol> <p><code>SYN攻击：</code>
在三次握手过程中，Server发送SYN-ACK之后，收到Client的ACK之前的TCP连接称为半连接（half-open connect），此时Server处于SYN_RCVD状态，当收到ACK后，Server转入ESTABLISHED状态。SYN攻击就是Client在短时间内伪造大量不存在的IP地址，并向Server不断地发送SYN包，Server回复确认包，并等待Client的确认，由于源地址是不存在的，因此，Server需要不断重发直至超时，这些伪造的SYN包将产时间占用未连接队列，导致正常的SYN请求因为队列满而被丢弃，从而引起网络堵塞甚至系统瘫痪。SYN攻击时一种典型的DDOS攻击</p> <h2 id="_4-发送http请求"><a href="#_4-发送http请求" class="header-anchor">#</a> 4.发送HTTP请求</h2> <p>基于HTTP等传输协议，客户端把一些信息传递给服务器</p> <ul><li><p>HTTP请求报文（所有客户端传递给服务器的内容，统称为请求报文）</p> <ul><li>谷歌控制台NetWork中可以看到</li> <li>请求起始行</li> <li>请求首部（请求头）</li> <li>请求主体</li> <li>Host Content-Length Connection Content-Type
Content-Encoding</li></ul></li> <li><p>HTTP状态码</p> <ul><li><p>1 开头的代表处理中，一般见不到</p></li> <li><p>2开头：都是成功</p> <ul><li>200：OK：成功</li> <li>201：CREATED：一般应用于告诉服务器创建一个新文件，最后服务器创建成功后返回的状态码</li> <li>204：NO CONTENT：对于某些请求（例如：PUT或者DELETE），服务器不想处理，可以返回空内容，并且用204状态码告知</li> <li>「206 Partial Content」是应用于 HTTP 分块下载或断点续传，表示响应返回的 body 数据并不是资源的全部，而是其中的一部分，也是服务器处理成功的状态</li></ul></li> <li><p>3开头：代表成功，只不过中间需要中转一下</p> <ul><li>301：Moved Permanently：永久重定向（永久转移）</li> <li>302：Moved Temporarily：临时转移，很早以前基本上用302来做，但是现在主要用307来处理这个事情，</li> <li>307的意思就是临时重定向Temporary Redirect =&gt;主要用于：服务器的负载均衡等</li> <li>304：Not Modified：设置HTTP的协商缓存</li></ul></li> <li><p>4开头：都是失败</p> <ul><li>400：Bad Request：传递给服务器的参数错误</li> <li>401：Unauthorized：无权限访问，表示认证错误</li> <li>404：Not Found：请求地址错误</li> <li>「403 Forbidden」表示服务器禁止访问资源，并不是客户端的请求出错。收到403响应表示服务器完成认证过程，但是客户端请求没有权限去访问要求的资源</li></ul></li> <li><p>5开头：都是失败</p> <ul><li>500：Internal Server Error：未知服务器错误</li> <li>「501 Not Implemented」表示客户端请求的功能还不支持，类似“即将开业，敬请期待”的意思。</li> <li>「502 Bad Gateway」通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误</li> <li>503：Service Unavailable：服务器超负荷</li></ul></li></ul></li> <li><p>强缓存 和 协商缓存（性能优化：减少HTTP请求的次数）</p> <ul><li>强缓存 ( Cache-Control 和 Expires )</li> <li>协商缓存 ( Last-Modified 和 Etag )</li></ul></li> <li><p>HTTP的请求方式<br> <strong>GET 与 POST 系列请求的区别（所谓的区别都是约定俗成的，并没有一定要这样做的规定）</strong><br>
GET 系列请求：一般用于从服务器获取信息（GET:给的少，拿的多）</p></li></ul> <ul><li>GET</li> <li>DELETE：一般应用于告诉服务器，从服务器上删除点东西</li> <li>HEAD：只想获取响应头内容，告诉服务器响应主体内容不要了</li> <li>OPTIONS：试探性请求，发个请求给服务器，看看服务器能不能接收到，能不能返回</li></ul> <p>POST 系列请求：一般用于给服务器推送信息（POST:给的多，拿的少）</p> <ul><li>POST</li> <li>PUT：和DELETE对应，一般是想让服务器把我传递的信息存储到服务器上（一般应用于文件和大型数据内容）<br> <strong>本质区别</strong><br>
GET系列传递给服务器信息的方式一般采用：问号传参<br>
POST系列传递给服务器信息的方式一般采用：设置请求主体<br> <strong>本质区别所导致的问题</strong></li></ul> <ol><li>GET传递给服务器的内容比POST少，因为URL有最长大小限制</li></ol> <p>GET：xhr.open('GET','/list?name=xxx&amp;year=xxx&amp;xxx=xxx...')</p> <p>IE浏览器一般限制2KB，谷歌浏览器一般限制4~8KB，超过长度的部分自动被浏览器截取了</p> <p>POST：xhr.send('....')</p> <p>请求主体中传递的内容理论上没有大小限制，但是项目中，为了保证传输的速度，我们会自己限制一些</p> <ol start="3"><li>GET会产生缓存（缓存不是自己可控制的）</li></ol> <p>因为请求的地址（尤其是问号传递的信息一样），浏览器有时候会认为你要和上次请求的数据一样，拿的是上一次信息；</p> <p>这种缓存我们不期望有，我们期望的缓存是自己可控制的；所以项目中，如果一个地址，GET请求多次，我们要去除这个缓存；</p> <p>解决办法：<strong>设置随机数</strong></p> <p>xhr.open('GET','/list?name=xxxx&amp;_='+Math.random());</p> <ol start="3"><li>GET相比较POST来说不安全（只是相对他俩来说）</li></ol> <p>GET是基于问号传参传递给服务器内容，有一种技术叫做URL劫持，这样别人可以获取或者篡改传递的信息；
而POST基于请求主体传递信息，不容易被劫持；</p> <div class="custom-block tip"><p>GET 和 POST 方法都是安全和幂等的吗？</p> <ul><li><p>在 HTTP 协议里，所谓的「安全」是指请求方法不会「破坏」服务器上的资源。</p></li> <li><p>所谓的「幂等」，意思是多次执行相同的操作，结果都是「相同」的<br>
那么很明显 GET 方法就是安全且幂等的，因为它是「只读」操作，无论操作多少次，服务器上的数据都是安全的，且每次的结果都是相同的。</p></li></ul> <p>POST 因为是「新增或提交数据」的操作，会修改服务器上的资源，所以是不安全的，且多次提交数据就会创建多个资源，所以不是幂等的</p></div> <h2 id="_5-服务器接受到请求，并进行处理，最后把信息返回给客户端"><a href="#_5-服务器接受到请求，并进行处理，最后把信息返回给客户端" class="header-anchor">#</a> 5.服务器接受到请求，并进行处理，最后把信息返回给客户端</h2> <ul><li>HTTP响应报文（所有服务器返回给客户端的内容）
<ul><li>响应起始行</li> <li>响应首部（响应头）
<ul><li>date存储的是服务器的时间</li> <li>...</li></ul></li> <li>响应主体</li> <li>服务器返回的时候是：先把响应头信息返回，然后继续返回响应主体中的内容（需要的信息大部分都是基于响应主体返回的）</li></ul></li></ul> <h2 id="_6-断开tcp-四次挥手"><a href="#_6-断开tcp-四次挥手" class="header-anchor">#</a> 6.断开TCP 四次挥手</h2> <p><img src="https://resource.limeili.co/image/202007041506.png" alt="">
由于TCP连接时全双工的，因此，每个方向都必须要单独进行关闭，这一原则是当一方完成数据发送任务后，发送一个FIN来终止这一方向的连接，收到一个FIN只是意味着这一方向上没有数据流动了，即不会再收到数据了，但是在这个TCP连接上仍然能够发送数据，直到这一方向也发送了FIN。首先进行关闭的一方将执行主动关闭，而另一方则执行被动关闭，上图描述的即是如此</p> <ol><li>第一次挥手：Client发送一个FIN，用来关闭Client到Server的数据传送，Client进入FIN_WAIT_1状态。
主动关闭方发送一个FIN，用来关闭主动方到被动关闭方的数据传送，也就是主动关闭方告诉被动关闭方：我已经不 会再给你发数据了(当然，在fin包之前发送出去的数据，如果没有收到对应的ack确认报文，主动关闭方依然会重发这些数据)，但是，此时主动关闭方还可 以接受数据。</li> <li>第二次挥手：Server收到FIN后，发送一个ACK给Client，确认序号为收到序号+1（与SYN相同，一个FIN占用一个序号），Server进入CLOSE_WAIT状态。</li> <li>第三次挥手：Server发送一个FIN，用来关闭Server到Client的数据传送，Server进入LAST_ACK状态。</li> <li>第四次挥手：Client收到FIN后，Client进入TIME_WAIT状态，接着发送一个ACK给Server，确认序号为收到序号+1，Server进入CLOSED状态，完成四次挥手。
<img src="https://resource.limeili.co/image/202007041521.png" alt=""> <strong>为什么“握手”是三次，“挥手”却要四次</strong><br>
TCP建立连接时之所以只需要&quot;三次握手&quot;，是因为在第二次&quot;握手&quot;过程中，服务器端发送给客户端的TCP报文是以SYN与ACK作为标志位的。SYN是请求连接标志，表示服务器端同意建立连接；ACK是确认报文，表示告诉客户端，服务器端收到了它的请求报文。</li></ol> <p>即SYN建立连接报文与ACK确认接收报文是在同一次&quot;握手&quot;当中传输的，所以&quot;三次握手&quot;不多也不少，正好让双方明确彼此信息互通。</p> <p>TCP释放连接时之所以需要“四次挥手”,是因为FIN释放连接报文与ACK确认接收报文是分别由第二次和第三次&quot;握手&quot;传输的。为何建立连接时一起传输，释放连接时却要分开传输？</p> <ul><li>建立连接时，被动方服务器端结束CLOSED阶段进入“握手”阶段并不需要任何准备，可以直接返回SYN和ACK报文，开始建立连接。</li> <li>释放连接时，被动方服务器，突然收到主动方客户端释放连接的请求时并不能立即释放连接，因为还有必要的数据需要处理，所以服务器先返回ACK确认收到报文，经过CLOSE-WAIT阶段准备好释放连接之后，才能返回FIN释放连接报文。</li></ul> <p><strong>为什么客户端在TIME-WAIT阶段要等2MSL?</strong></p> <p>为的是确认服务器端是否收到客户端发出的ACK确认报文</p> <p>当客户端发出最后的ACK确认报文时，并不能确定服务器端能够收到该段报文。所以客户端在发送完ACK确认报文之后，会设置一个时长为2MSL的计时器。MSL指的是Maximum Segment Lifetime：一段TCP报文在传输过程中的最大生命周期。2MSL即是服务器端发出为FIN报文和客户端发出的ACK确认报文所能保持有效的最大时长。</p> <p>服务器端在1MSL内没有收到客户端发出的ACK确认报文，就会再次向客户端发出FIN报文；</p> <ul><li>如果客户端在2MSL内，再次收到了来自服务器端的FIN报文，说明服务器端由于各种原因没有接收到客户端发出的ACK确认报文。客户端再次向服务器端发出ACK确认报文，计时器重置，重新开始2MSL的计时；</li> <li>否则客户端在2MSL内没有再次收到来自服务器端的FIN报文，说明服务器端正常接收了ACK确认报文，客户端可以进入CLOSED阶段，完成“四次挥手”。</li></ul> <p>Connection: Keep-Alive 保持TCP不中断（性能优化点，减少每一次请求还需要重新建立链接通道的时间）</p> <h2 id="_7-客户端渲染服务器返回的结果"><a href="#_7-客户端渲染服务器返回的结果" class="header-anchor">#</a> 7.客户端渲染服务器返回的结果</h2> <h2 id="前端性能优化点"><a href="#前端性能优化点" class="header-anchor">#</a> 前端性能优化点</h2> <h3 id="_1-减少http请求的次数和大小"><a href="#_1-减少http请求的次数和大小" class="header-anchor">#</a> 1. 减少HTTP请求的次数和大小</h3> <ul><li>合并压缩 webpack（代码比较少的情况下，尽可能使用内嵌式）</li> <li>雪碧图或者图片BASE64</li> <li>对于动态获取的图片，采用图片懒加载（数据也做异步分批加载：开始只请求加载第一屏的数据，滑动到第几屏在加载这一屏的数据和图片）
<ul><li>骨架屏技术（首屏内容由服务器渲染；再或者开始展示占位结构，客户端在单独获取数据渲染；）</li></ul></li> <li>音视频取消预加载（播放的时候再去加载音视频文件，对于自动播放采取延迟播放的处理）</li> <li>服务器采用GZIP压缩</li> <li>....</li></ul> <h3 id="_2-建立缓存机制"><a href="#_2-建立缓存机制" class="header-anchor">#</a> 2.建立缓存机制</h3> <blockquote><p>把一些请求回来的信息进行本地存储（缓存存储），在缓存有效期内，再次请求资源，直接从缓存中获取数据，而不是服务器上从新拉取</p></blockquote> <ul><li>DNS预获取</li> <li>资源文件的强缓存和协商缓存（304）</li> <li>数据也可以做缓存（把从服务器获取的数据存储到本地：cookie/localStorage/redux/vuex等，设定期限，在期限内，直接从本地获取数据即可）</li> <li>离线存储（一般很少用）manifest</li> <li>CDN区域分布式服务器开发部署（费钱  效果会非常的好）</li> <li>....</li></ul> <h3 id="_3-代码上的优化"><a href="#_3-代码上的优化" class="header-anchor">#</a> 3.代码上的优化</h3> <ul><li>减少DOM的重绘和回流</li> <li>在JS中尽量减少闭包的使用（内存优化）</li> <li>在JS中避免“嵌套循环”和“死循环”</li> <li>尽可能使用事件委托</li> <li>尽量减少CSS表达式的使用(expression)</li> <li>CSS选择器解析规则是从右向左解析（基于less/sass开发的时候尽可能减少层级嵌套，目的是让选择器的前缀短一点）  【 a{}  和  .box a{}】</li> <li>尽可能实现JS的封装（低耦合高内聚），减少页面中的冗余代码</li> <li>在CSS导入的时候尽量减少使用@import导入式</li> <li>使用window.requestAnimationFrame（JS中的帧动画）代替传统的定时器动画（能用CSS3动画的绝对不用JS动画）</li> <li>减少递归的使用，避免死递归，避免由于递归导致的栈内存嵌套</li> <li>基于SCRIPT调取JS的时候，可已使用 defer或者async 来异步加载
……</li></ul> <h3 id="_4-安全优化"><a href="#_4-安全优化" class="header-anchor">#</a> 4.安全优化</h3> <h3 id="_5-webpack上的优化"><a href="#_5-webpack上的优化" class="header-anchor">#</a> 5.webpack上的优化</h3></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/13/2020, 11:03:21 PM</span></div></footer> <!----></main> <!----> <div style="display:none;" data-v-319dd33c data-v-319dd33c><div class="comments-wrapper" data-v-319dd33c><div class="valine-wrapper"><div id="valine"></div></div></div></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div></div></div>
    <script src="/assets/js/app.d8b9440e.js" defer></script><script src="/assets/js/3.7525ef15.js" defer></script><script src="/assets/js/1.04d39d01.js" defer></script><script src="/assets/js/15.d31d99e4.js" defer></script>
  </body>
</html>
